# newsreels-iOS
- Languge: Swift 5.
- Architecture: MVC.
- UI: mainly UIKit with some screens in SwiftUI. 
- Video Player: Native AVPlayer. Away from NRPlayer and AVPlayer there are other players in the code but they aren't used anymore, just as extensions to AVPlayer.
AVFoundation is used for playing and preloading HLS videos. The preloading is made by setting preferredForwardBufferDuration value and making automaticallyWaitsToMinimizeStalling as true. The app preload get executed for the next 3 items forward from the current item in the collection view.
- Communication Pattren: delegates for most cases, and for some functionalities it uses notifications.
- Images Caching: SDWebImage
- Minimum Deployment: iOS 14.0


## Reels Module
'Main' Path: Bullet/ViewControllers/New\ Designs/NewsReels/ReelsVC

### The module components:
View Controller: here lays the network requests, app state managment, video preloading, images cache, navigation, collection view delegate, and scroll view controll.
Cell: A basic collection view that holds the video player, and interacting buttons. it communicate with the View Controller through delegate.
News Reels Player: This is an AVPlayer subclass. the idea was to make custom player but there was no enough time for that. 
Bullet Details or View More: This is the details screen that appears when tapping on the video.

## Discover

## Articles Module


## Tab Bar


## Profile



## CI/CD


## important notes

- the pods had conflict, and the conflict resolved by customizing the pods locally (Pods in Pods directory) so the pod isn't part in the GitIgnored and it's not recommended to reinstall the pods.
the proper solution will be having these pods in a local module. untill we do that avoid reinstalling pods.

- the Service and Content App extensions are disable and removed from the build phases for now since they cause issue on running the app on actual devices. so far this not effection the extensions widgets.

- there are files generated by the Swift compiler. These files contain information about the dependencies between Swift source files and are used by the Swift build system to track changes and optimize build times.

they shouldn't be in the project directory itself, and they probably generated due to one of the build phases.
it's safe to remove them. in order to do that you can run the following command on terminal:

rm *.o; rm *.d; rm *.dia; rm *.swiftdeps~; rm *.swiftdeps

- if you facing error such as "Command SwiftCompile failed with nonzero exit code" to the following steps:
1- make sure you signned in for all targets, including the extensions.
2- make sure you using diffrent bundle id for each target.
3- run on actual device.
4- downgrade XCode to 14.2 or lower.
5- make sure you using the same pods I uploaded without making "pod install" or any modification.

if non of these work:
Delete Xcode from Applications Folder and Empty Trash.

Go to ~/Library/Developer and Delete CoreSimulator, Xcode, XCTestDevices Folder. Empty trash

Goto ~/Library/Caches and delete everything starting with com.apple.dt.Xcode, Empty trash

Then Restart your Mac and reinstall Xcode.
